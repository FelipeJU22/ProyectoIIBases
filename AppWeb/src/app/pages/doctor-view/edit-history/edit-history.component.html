<div class="modal-header" style="background-color: #2874A6;">
  <p class="modal-title">Historial Cl√≠nico</p>
  <button type="button" class="btn-close custom-close-btn" aria-label="Close" (click)="closeModal.emit('Cross click')"></button>
</div>
<div class="modal-body" style="background-color: #5DADE2;">
  <form [formGroup]="formRG">
    <div>
      <input formControlName="id" placeholder="Cedula" class="form-input custom-input">
      <a  class="btn btn-primary custom-button" (click)="searchHistory()">Buscar</a>
    </div>
  </form>
  <div *ngIf="historyFound" ngbAccordion [closeOthers]="true" style="display: inline-block;">
    @for (item of history; track item) {
      <div ngbAccordionItem [collapsed]="item !== 'First'">
        <div class="button-container">
        </div>
        <h2 ngbAccordionHeader>
          <button ngbAccordionButton (click)="setSelected(item.fechaProcedimiento)">fecha: {{item.fechaProcedimiento}}</button>
        </h2>
        <div ngbAccordionCollapse>
          <div ngbAccordionBody>
            <ng-template>
              <form [formGroup]="formRA">
                <div class="input-group">
                  <input
                    id="date"
                    class="form-control"
                    placeholder="yyyy-mm-dd"
                    name="dp"
                    ngbDatepicker
                    #dp="ngbDatepicker"
                    placeholder="Fecha de ingreso"
                    formControlName = "date"
                  />
                  <button class="btn btn-outline-secondary" (click)="dp.toggle()" type="button">
                    <img class="img-calendar"  src="../../../assets/images/calendar.png">
                  </button>
                </div>
                <div formArrayName="plan">
                  <div *ngFor="let pathologyGroup of plan.controls; let i = index" [formGroupName]="i" class="pathology-input-group">
                    <input formControlName="procedure" placeholder="Ingrese un procedimiento">
                    <input formControlName="treatment" placeholder="Ingrese su tratamiento">
                    <button class="button-r-pathology" (click)="removePlan(i)">
                      <img src="../../../assets/images/equis.png" style="width: 0.5vw;">
                    </button>
                  </div>
                </div>
              </form>
              <div class="col">
                  <button  type="button" class="btn btn-outline green-button" id="dropdownBasic1" ngbDropdownToggle (click)="addPlan()">
                    Agregar procedimiento
                  </button>
                  <div class="button-container">
                    <button class="btn btn-outline blue-button" (click)="editHistory()">Guardar Cambios</button>
                  </div>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    }
  </div>
</div>
<div class="modal-footer" style="background-color: #2874A6;">
</div>
